# C语言笔记

## 1.C语言中struct的用法

C语言中，struct是一种用于定义复合数据类型的关键字。struct允许您定义一个新类型，其中包含一组属性（称为成员变量）。您可以通过创建一个新的struct变量来使用它，并使用“.”来访问其成员变量。

例如，您可以定义一个struct来表示一个学生，其中包含姓名、年龄和成绩。您可以定义一个struct类型如下：

```
Copy code
struct Student {
  char* name;
  int age;
  float grade;
};
```

然后，您可以创建一个Student类型的变量，并使用“.”来访问其成员变量：

```
Copy code
struct Student s;
s.name = "John";
s.age = 18;
s.grade = 80.5;
```

您还可以通过将struct作为函数参数或返回值来使用它。例如，您可以定义一个函数来查找一个学生的平均成绩：

```
Copy code
struct Student getStudentAverage(struct Student s) {
  s.grade = (s.grade1 + s.grade2 + s.grade3) / 3.0;
  return s;
}
```

在这种情况下，函数getStudentAverage接收一个Student类型的参数，并返回一个新的Student类型的变量，其平均成绩被计算出来。

总之，struct是一种有用的工具，可用于定义复合数据类型，并方便地存储、访问和传递多个属性。

## 2.C语言中的结构体可以定义成员函数吗

在 C 语言中是不能定义结构体成员函数的。C 语言支持函数指针，但是这些函数指针必须作为结构体的成员，并且必须在定义结构体时就进行初始化。

例如，假设我们有一个结构体定义如下：

```
Copy code
struct foo {
  int x;
  int y;
  void (*fptr)(int);
};
```

在这个例子中，`foo` 结构体定义了一个名为 `fptr` 的函数指针成员。在定义 `foo` 结构体的变量时，必须初始化 `fptr` 成员，并且必须指定一个函数，该函数接受一个 `int` 类型的参数，并且没有返回值。

例如：

```
Copy code
void my_func(int a) {
  printf("a is %d\n", a);
}

struct foo f = {0, 0, my_func};
```

在这个例子中，我们定义了一个名为 `f` 的 `foo` 类型的变量，并将 `fptr` 成员初始化为 `my_func` 函数的地址。这样，我们就可以通过调用 `f.fptr(...)` 来调用 `my_func` 函数了。

另外，需要注意的是，C 语言不支持面向对象编程，因此无法直接在结构体中定义成员函数。如果想要实现类似的功能，可以使用函数指针来实现。

## 3.C语言指针，在64位操作系统中char和int都表示64位的地址吗

在 64 位操作系统中，所有指针类型（包括 char* 和 int*）都表示 64 位地址。在 C 语言中，指针的大小（即所占字节数）取决于所运行的操作系统和硬件平台，在 64 位操作系统和硬件平台上，指针通常是 64 位的。

不过，在 C 语言中，指针类型与指针所指向的数据类型是不同的。例如，char* 类型的指针表示的是字符型数据的地址，int* 类型的指针表示的是整型数据的地址。因此，当使用 char* 类型的指针访问内存时，会按照字符型数据的大小（通常是 1 字节）来访问内存；而使用 int* 类型的指针访问内存时，会按照整型数据的大小（通常是 4 字节或 8 字节）来访问内存。

举个例子，假设有以下代码：

```c
int x = 10;
int* p = &x;
char* q = (char*)&x;
```

这里，p 是一个 int* 类型的指针，它指向变量 x 的地址，而 q 是一个 char* 类型的指针，它也指向变量 x 的地址。由于 p 是一个 int* 类型的指针，当它访问内存时会访问4个字节的内容，而q只能访问一个字节的内容，会报错。

## 4.函数声明与函数定义的区别

函数的声明与函数的定义形式上十分相似，但是二者有着本质上的不同。声明是不开辟内存的，仅仅告诉编译器，要声明的部分存在，要预留一点空间。定义则需要开辟内存。

函数的定义

函数的定义是一个完整的函数单元，包含函数类型、函数名、形参及形参类型、函数体等。在程序中，函数的定义只能有一次。函数首部与花括号间不加分号。

函数的声明

函数声明只是对编译系统的一个说明：函数声明是对定义的函数的返回值的类型说明，以通知系统在本函数中所调用的函数是什么类型。不包含函数体（或形参），调用几次该函数就应在各个主调函数中做相应声明。函数声明是一个说明语句，必须以分号结束。

C语言编译系统是由上往下编译的.一般被调函数放在主调函数后面的话,前面就该有声明.不然C由上往下的编译系统将无法识别。正如变量必须先声明后使用一样，函数也必须在被调用之前先声明，否则无法调用！函数的声明可以与定义分离，要注意的是一个函数只能被定义一次，但可以声明多次。

函数声明由函数返回类型、函数名和形参列表组成。形参列表必须包括形参类型，但是不必对形参命名。这三个元素被称为函数原型，函数原型描述了函数的接口。定义函数的程序员提供函数原型，使用函数的程序员就只需要对函数原型编辑即可。	

## 5.函数参数

如果函数要使用参数，则必须声明接受参数值的变量。这些变量称为函数的**形式参数**。

形式参数就像函数内的其他局部变量，在进入函数时被创建，退出函数时被销毁。

当调用函数时，有两种向函数传递参数的方式：

| 调用类型                                                     | 描述                                                         |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| [传值调用](https://www.runoob.com/cprogramming/c-function-call-by-value.html) | 该方法把参数的实际值复制给函数的形式参数。在这种情况下，修改函数内的形式参数不会影响实际参数。 |
| [引用调用](https://www.runoob.com/cprogramming/c-function-call-by-pointer.html) | 通过指针传递方式，形参为指向实参地址的指针，当对形参的指向操作时，就相当于对实参本身进行的操作。 |

默认情况下，C 使用**传值调用**来传递参数。一般来说，这意味着函数内的代码不能改变用于调用函数的实际参数。

## 6.局部变量与全局变量

当局部变量被定义时，系统不会对其初始化，您必须自行对其初始化。定义全局变量时，系统会自动对其初始化。